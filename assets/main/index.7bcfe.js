window.__require=function t(e,n,o){function r(c,s){if(!n[c]){if(!e[c]){var u=c.split("/");if(u=u[u.length-1],!e[u]){var a="function"==typeof __require&&__require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+c+"'")}c=u}var l=n[c]={exports:{}};e[c][0].call(l.exports,function(t){return r(e[c][1][t]||t)},l,l.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({AssetBridge:[function(t,e,n){"use strict";cc._RF.push(e,"cc2d2AWy51Aio0Pm9YIjoLa","AssetBridge");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.AssetBridge=void 0;var u,a=t("./common/asset/AssetMgr"),l=t("./define/Board"),p=t("./define/Texture"),f=cc._decorator,h=f.ccclass,d=f.property;(function(t){t[t.Blue=0]="Blue",t[t.Green=1]="Green",t[t.Red=2]="Red",t[t.Yellow=3]="Yellow",t[t.BoomH=4]="BoomH",t[t.BoomV=5]="BoomV",t[t.BoomO=6]="BoomO",t[t.Stone=7]="Stone",t[t.Knight=8]="Knight"})(u||(u={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.used=!1,e.textures=[],e}var n;return r(e,t),n=e,Object.defineProperty(e,"inst",{get:function(){return this._inst},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){n._inst=this},e.prototype.getChess=function(t){return c(this,void 0,Promise,function(){var e,n;return s(this,function(){return this.used?(e=u[l.ChessType[t]],[2,this.textures[e]]):(n=p.TextureSrc[l.ChessType[t]],[2,a.AssetMgr.inst().loadAsset(n,cc.SpriteFrame,!0)])})})},e._inst=null,i([d(cc.Boolean)],e.prototype,"used",void 0),i([d([cc.SpriteFrame])],e.prototype,"textures",void 0),n=i([h],e)}(cc.Component);n.AssetBridge=y,cc._RF.pop()},{"./common/asset/AssetMgr":"AssetMgr","./define/Board":"Board","./define/Texture":"Texture"}],AssetLoader:[function(t,e,n){"use strict";cc._RF.push(e,"fa633VPkiFAsJJWzccg3Mvi","AssetLoader"),Object.defineProperty(n,"__esModule",{value:!0}),n.AssetLoader=void 0;var o=function(){function t(){}return t.parseUrl=function(t){var e=t.split("/?");if(e.length>1){var n=e[1].split("=");return{path:n[0],bundle:n[1]}}return{path:e[0]}},t.combineUrl=function(t,e){return void 0===e&&(e=""),"{0}/?{1}".format(t,e)},t}();n.AssetLoader=o,cc._RF.pop()},{}],AssetMgr:[function(t,e,n){"use strict";cc._RF.push(e,"277d9B3cahB9YvuiagR4rcS","AssetMgr");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.AssetMgr=void 0;var s=t("../utility/Singleton"),u=t("./AssetLoader"),a=t("./loader/BundleLoader"),l=t("./loader/FolderLoader"),p=t("./loader/SingleLoader"),f=function(t){function e(){var e=t.call(this)||this;return e._bundles=new Map,e._cache=new Map,e._loaders={},e._loaders.single=new p.SingleLoader,e._loaders.folder=new l.FolderLoader,e._loaders.bundle=new a.BundleLoader,e}return r(e,t),Object.defineProperty(e.prototype,"_now",{get:function(){return Date.now()/1e3},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){this._bundles.forEach(function(t){t.releaseAll(),cc.assetManager.removeBundle(t)}),this._bundles.clear(),this._cache.forEach(function(t){return t.asset.decRef()}),this._cache.clear()},e.prototype.getCache=function(t){var n=null,o=this._cache.get(t);return o&&(o.time=this._now+e.DATELINE,n=o.asset),n},e.prototype.addCache=function(t,e,n){return!(!t||!e||0!=this._cache.has(t)||(e.addRef(),this._cache.set(t,{asset:e,time:this._now,reserve:n}),0))},e.prototype.clearCache=function(){var t=this,e=[],n=this._now;this._cache.forEach(function(t,o){0==t.reserve&&n>=t.time&&(t.asset.decRef(),e.push(o))}),e.forEach(function(e){return t._cache.delete(e)},this)},e.prototype.loadAsset=function(t,e,n){return i(this,void 0,Promise,function(){var o,r;return c(this,function(i){switch(i.label){case 0:return t?0!=this._cache.has(t)?[3,3]:[4,this.loadBundle(t)]:[3,4];case 1:return i.sent(),o=this.addCache,r=[t],[4,this._loaders.single.execute(t,e)];case 2:o.apply(this,r.concat([i.sent(),n])),i.label=3;case 3:return[2,this.getCache(t)];case 4:return[2,null]}})})},e.prototype.loadFolder=function(t,e,n){return i(this,void 0,Promise,function(){var o=this;return c(this,function(r){switch(r.label){case 0:return t?[4,this.loadBundle(t)]:[3,3];case 1:return r.sent(),[4,this._loaders.folder.execute(t,e)];case 2:r.sent().forEach(function(t){return o.addCache(t.url,t.asset,n)},this),r.label=3;case 3:return[2,null]}})})},e.prototype.loadBundle=function(t){return i(this,void 0,Promise,function(){var e,n,o,r,i;return c(this,function(c){switch(c.label){case 0:return null!=this._bundles.get(t)?[3,2]:((e=u.AssetLoader.parseUrl(t)).path,(n=e.bundle)?(r=(o=this._bundles).set,i=[t],[4,this._loaders.bundle.execute(n)]):[3,2]);case 1:r.apply(o,i.concat([c.sent()])),c.label=2;case 2:return[2]}})})},e.DATELINE=180,e}(s.Singleton);n.AssetMgr=f,cc._RF.pop()},{"../utility/Singleton":"Singleton","./AssetLoader":"AssetLoader","./loader/BundleLoader":"BundleLoader","./loader/FolderLoader":"FolderLoader","./loader/SingleLoader":"SingleLoader"}],Audio:[function(t,e,n){"use strict";cc._RF.push(e,"fbcf3Q+fM5GuZLqlCdboLxc","Audio"),Object.defineProperty(n,"__esModule",{value:!0}),n.AudioSrc=void 0,(n.AudioSrc||(n.AudioSrc={})).LoopBgm="audio/bgm-1",cc._RF.pop()},{}],BasePnl:[function(t,e,n){"use strict";cc._RF.push(e,"b3544ZtH0BP0amuAu3TSros","BasePnl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.BasePnl=void 0;var u=cc._decorator,a=u.ccclass,l=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.show=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c(this,void 0,Promise,function(){return s(this,function(){return this.node.active=!0,[2]})})},e.prototype.hide=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c(this,void 0,Promise,function(){return s(this,function(){return this.node.active=!1,[2]})})},i([a],e)}(cc.Component));n.BasePnl=l,cc._RF.pop()},{}],BgmAudio:[function(t,e,n){"use strict";cc._RF.push(e,"124bdGQrzBEbY37fSnKLBOk","BgmAudio");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BgmAudio=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"vol",{get:function(){return cc.audioEngine.getMusicVolume()},set:function(t){cc.audioEngine.setMusicVolume(t.limit(0,1))},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){},e.prototype.play=function(t){cc.audioEngine.playMusic(t,!0)},e.prototype.stop=function(){cc.audioEngine.stopMusic()},e.prototype.pause=function(){cc.audioEngine.pauseMusic()},e.prototype.resume=function(){cc.audioEngine.resumeMusic()},e}(t("../utility/Singleton").Singleton);n.BgmAudio=i,cc._RF.pop()},{"../utility/Singleton":"Singleton"}],BlocksView:[function(t,e,n){"use strict";cc._RF.push(e,"781b0rDPg5N8Ye0ADEtM2wu","BlocksView");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.BlocksView=void 0;var u=t("../../define/Board"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.reset()},e.prototype.reset=function(){this.node.width=0},e.prototype.fight=function(){return c(this,void 0,Promise,function(){var t,e=this;return s(this,function(n){switch(n.label){case 0:return this.reset(),t=window.setInterval(function(){e.node.width<u.BOARD_W&&(e.node.width+=u.CHESS_W)},300),[4,new Promise(function(n){window.setTimeout(function(){window.clearInterval(t),e.node.width=u.BOARD_W,n()},2500)})];case 1:return n.sent(),[2]}})})},i([l],e)}(cc.Component));n.BlocksView=p,cc._RF.pop()},{"../../define/Board":"Board"}],BoardCmd:[function(t,e,n){"use strict";cc._RF.push(e,"3e3230bFP9KuKfo9X1aqeo2","BoardCmd");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BoardCmd=n.ChessCmd=n.ChessAct=void 0;var i=t("./ChessModel");n.ChessAct=function(){this.startTime=0};var c=function(t){function e(e){var n=t.call(this)||this;return n.actions=[],Object.assign(n,e),n}return r(e,t),e.prototype.clear=function(){this.actions.forEach(function(){return null}),this.actions.length=0},e.prototype.add=function(t){this.actions.push(t)},e}(i.ChessModel);n.ChessCmd=c;var s=function(){function t(){this.container=[],this._timeline=0}return t.prototype.clear=function(){this.container.forEach(function(t){t.clear(),t=null}),this.container.length=0},t.prototype.add=function(t,e){var n=this.find(t);null==n&&(n=new c(t),this.container.push(n)),e.startTime=this._timeline,n.add(e)},t.prototype.find=function(t){for(var e=0,n=this.container;e<n.length;e++){var o=n[e];if(o.id==t.id)return o}return null},t.prototype.pass=function(t){void 0===t&&(t=.5),this._timeline+=t},t}();n.BoardCmd=s,cc._RF.pop()},{"./ChessModel":"ChessModel"}],BoardCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"0ddecW8VcpFb6FuIwAHriS3","BoardCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.BoardCtrl=void 0;var u=t("./../common/event/EventBase"),a=t("../define/Board"),l=t("../define/Event"),p=t("../stage/StageCtrl"),f=t("./BoardCmd"),h=t("./BoardModel"),d=t("./BoardView"),y=t("./action/Move"),_=t("./select/SelectHandler"),v=cc._decorator,b=v.ccclass,g=v.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._model=new h.BoardModel,e.view=null,e._slide=!1,e._playing=!1,e}var n;return r(e,t),n=e,e.inst=function(){return this._inst},e.prototype.onLoad=function(){n._inst=this;var t=this.view.node;t.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onDestroy=function(){var t=this.view.node;t.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),t.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),t.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),_.SelectHandler.destroy(),this._model.clear(),this._model=null},e.prototype.onTouchStart=function(t){0==this._slide&&(this._slide=this.doSelect(this.convertPos(t)))},e.prototype.onTouchMove=function(t){if(this._slide){var e=this.convertPos(t);_.SelectHandler.inst().slide(e)&&this.doSelect(e)&&(this._slide=!1)}},e.prototype.onTouchEnd=function(){this._slide=!1},e.prototype.convertPos=function(t){var e=this.view.node.convertToNodeSpaceAR(t.getLocation());return{x:Math.floor(e.x/a.CHESS_W),y:Math.floor(e.y/a.CHESS_H)}},e.prototype.doSelect=function(t){var e=this;if(h.BoardModel.checkPos(t)&&0==this._playing){var n=_.SelectHandler.inst().execute(this._model,t);return!!(n&&n.length>0)&&(this._playing=!0,this.view.accept(n).then(function(){return c(e,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return _.SelectHandler.inst().succeed?[4,p.StageCtrl.inst().finish()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._playing=!1,[2]}})})}),!0)}},e.prototype.reset=function(t){return c(this,void 0,Promise,function(){var e,n,o=this;return s(this,function(r){switch(r.label){case 0:return null==t||t.length<=0?[2]:(e=[this.resetPos()],n=new f.BoardCmd,null==t||t.forEach(function(t){if(t.x!=a.KNIGHT_POS.x||t.y!=a.KNIGHT_POS.y){var e=o._model.getChess(t);e.setPos(t),e.type=a.ChessType.Stone,e.hold=!0,n.add(e,new y.Move(t,!0))}}),e.push(n),[4,this.view.accept(e)]);case 1:return r.sent(),[2]}})})},e.prototype.resetPos=function(){var t=this,e=new f.BoardCmd;return h.BoardModel.loopXY(function(n){var o=t._model.getChess(n);o&&(o.type==a.ChessType.Stone&&(o.type=a.ChessType.None,o.hold=!1),o.dropPos.y=n.y+a.BOARD_ROW+1,e.add(o,new y.Move(o.dropPos,!0)))}),e},e.prototype.fight=function(){return c(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return this.randTable(),[4,this.exposeTable()];case 1:return t.sent(),this._model.print(),[2]}})})},e.prototype.randTable=function(){var t=this;h.BoardModel.loopXY(function(e){var n=t._model.getChess(e);n.type=n.type!=a.ChessType.Stone?t._model.getRandType():n.type;for(var o=a.NORM_CHESS.min;o<=a.NORM_CHESS.max;o++)return void(t._model.getCrushes(e).length>=3&&++n.type>=a.NORM_CHESS.max&&(n.type=a.NORM_CHESS.min))}),this._model.getChess(a.KNIGHT_POS).type=a.ChessType.Knight},e.prototype.exposeTable=function(){return c(this,void 0,Promise,function(){var t,e=this;return s(this,function(n){switch(n.label){case 0:return t=new f.BoardCmd,h.BoardModel.loopX(function(n){t.pass(.1),h.BoardModel.loopY(function(o){var r={x:n,y:o},i=e._model.getChess(r);i.dropPos.y=r.y+a.BOARD_ROW+1,i.dataPos=r,i.type!=a.ChessType.Stone&&(t.add(i,new y.Move(i.dropPos,!0)),t.add(i,new y.Move(i.dataPos)))})}),[4,this.view.accept([t])];case 1:return n.sent(),[2]}})})},e.prototype.debugChess=function(t,e,n){this._model.getChess({x:t,y:e}).type=n},e.prototype.debugPrint=function(){this._model.print()},e._inst=null,i([g(d.BoardView)],e.prototype,"view",void 0),i([u.onTrigger(l.EventType[l.EventType.DebugChess])],e.prototype,"debugChess",null),i([u.onTrigger(l.EventType[l.EventType.DebugPrint])],e.prototype,"debugPrint",null),n=i([b,u.enableEvent()],e)}(cc.Component);n.BoardCtrl=m,cc._RF.pop()},{"../define/Board":"Board","../define/Event":"Event","../stage/StageCtrl":"StageCtrl","./../common/event/EventBase":"EventBase","./BoardCmd":"BoardCmd","./BoardModel":"BoardModel","./BoardView":"BoardView","./action/Move":"Move","./select/SelectHandler":"SelectHandler"}],BoardModel:[function(t,e,n){"use strict";cc._RF.push(e,"17534mmQA9IebojStvlazO3","BoardModel"),Object.defineProperty(n,"__esModule",{value:!0}),n.BoardModel=void 0;var o=t("./../common/utility/RandUtil"),r=t("../define/Board"),i=t("./ChessModel"),c=function(){function t(){var e=this;this.table=[],t.loopX(function(t){return e.table[t]=[]}),t.loopXY(function(t){return e.setChess(t,new i.ChessModel)})}return t.prototype.clear=function(){var e=this;t.loopXY(function(t){return e.table[t.x][t.y]=null}),this.table.length=0},t.loopX=function(t){for(var e=0;e<r.BOARD_COL;e++)t(e)},t.loopY=function(t){for(var e=0;e<r.BOARD_ROW;e++)t(e)},t.loopXY=function(t){var e=this;this.loopY(function(n){return e.loopX(function(e){return t({x:e,y:n})})})},t.checkPos=function(t){return!!t&&t.x>=0&&t.x<r.BOARD_COL&&t.y>=0&&t.y<r.BOARD_ROW},t.isNormType=function(t){return t>=r.NORM_CHESS.min&&t<=r.NORM_CHESS.max},t.isBuffType=function(t){return t>=r.BUFF_CHESS.min&&t<=r.BUFF_CHESS.max},t.isCtrlType=function(t){return t>=r.CTRL_CHESS.min&&t<=r.CTRL_CHESS.max},t.prototype.getRandType=function(){return o.RandUtil.randInt(r.NORM_CHESS.max+1,r.NORM_CHESS.min)},t.prototype.getChess=function(e){return t.checkPos(e)?this.table[e.x][e.y]:null},t.prototype.setChess=function(e,n){t.checkPos(e)&&(this.table[e.x][e.y]=n,null==n||n.setPos(e))},t.prototype.print=function(){var e=this,n="";t.loopXY(function(t){0==t.x&&0!=t.y&&(n+="\n");var o=e.getChess({x:t.x,y:r.BOARD_ROW-t.y-1});n+=(o?o.toString():"xxx")+", "}),cc.log(n)},t.prototype.getCrushes=function(t){var e=[],n=this.getCrushesH(t,!1),o=this.getCrushesV(t,!1);return n.length>=2&&(e=e.concat(n)),o.length>=2&&(e=e.concat(o)),e.length>=2&&e.unshift(t),e},t.prototype.getCrushesH=function(e,n){var o;void 0===n&&(n=!0);var i=[],c=this.getChess(e);if(null==c)return i;var s=null===(o=this.getChess(e))||void 0===o?void 0:o.type;if(0==t.isNormType(s)||c.trans)return i;for(var u=e.x-1;u>=0;u--){var a={x:u,y:e.y};if(0==this.crushFilter(s,a))break;i.unshift(a)}for(n&&i.push(e),u=e.x+1;u<r.BOARD_COL&&(a={x:u,y:e.y},0!=this.crushFilter(s,a));u++)i.push(a);return i},t.prototype.getCrushesV=function(e,n){var o;void 0===n&&(n=!0);var i=[],c=this.getChess(e);if(null==c)return i;var s=null===(o=this.getChess(e))||void 0===o?void 0:o.type;if(0==t.isNormType(s)||c.trans)return i;for(var u=e.y-1;u>=0;u--){var a={x:e.x,y:u};if(0==this.crushFilter(s,a))break;i.unshift(a)}for(n&&i.push(e),u=e.y+1;u<r.BOARD_ROW&&(a={x:e.x,y:u},0!=this.crushFilter(s,a));u++)i.push(a);return i},t.prototype.crushFilter=function(t,e){var n=this.getChess(e);return n&&n.type==t&&0==n.flag&&null==n.trans},t}();n.BoardModel=c,cc._RF.pop()},{"../define/Board":"Board","./../common/utility/RandUtil":"RandUtil","./ChessModel":"ChessModel"}],BoardView:[function(t,e,n){"use strict";cc._RF.push(e,"0dd66GQPvxNArSMgGyrT1Pn","BoardView");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.BoardView=void 0;var u=t("./../common/asset/AssetMgr"),a=t("./../common/event/EventMgr"),l=t("./../common/pool/CmptPool"),p=t("../define/Board"),f=t("../define/Event"),h=t("../define/Prefab"),d=t("./ChessView"),y=cc._decorator,_=y.ccclass,v=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._chesses=new Map,e._commands=[],e}return r(e,t),e.prototype.onDestroy=function(){this._commands.length=0,this._chesses.clear()},e.prototype.fetch=function(){return c(this,void 0,Promise,function(){var t,e=this;return s(this,function(n){switch(n.label){case 0:return[4,l.CmptPool.inst().fetch(d.ChessView,function(){return c(e,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,u.AssetMgr.inst().loadAsset(h.PrefabSrc.Chess,cc.Prefab,!0)];case 1:return t=e.sent(),[2,cc.instantiate(t)]}})})})];case 1:return(t=n.sent()).active=!1,t.setParent(this.node),[2,t.getComponent(d.ChessView)]}})})},e.prototype.recycle=function(t){this._chesses.delete(t.id)&&l.CmptPool.inst().recycle(d.ChessView,t.node)},e.prototype.accept=function(t){return c(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:if(!t)return[3,4];this._commands=this._commands.concat(t),e.label=1;case 1:return[4,this.processBoard(this._commands.shift())];case 2:e.sent(),e.label=3;case 3:if(this._commands.length>0)return[3,1];e.label=4;case 4:return[2]}})})},e.prototype.processBoard=function(t){return c(this,void 0,Promise,function(){var e,n,o,r,i;return s(this,function(c){switch(c.label){case 0:e=[],n=0,o=t.container,c.label=1;case 1:return n<o.length?(r=o[n],null!=(i=this._chesses.get(r.id))?[3,3]:[4,this.fetch()]):[3,5];case 2:(i=c.sent()).init(r),this._chesses.set(i.id,i),c.label=3;case 3:e.push(this.processChess(r)),c.label=4;case 4:return n++,[3,1];case 5:return[4,Promise.all(e)];case 6:return c.sent(),[2]}})})},e.prototype.processChess=function(t){return c(this,void 0,Promise,function(){var e,n=this;return s(this,function(){return e=this._chesses.get(t.id),[2,new Promise(function(o){for(var r=cc.tween(e.node),i=0,c=0,s=t.actions;c<s.length;c++){var u=s[c];if(u.startTime>i){var a=u.startTime-i;r.delay(a),i+=a}var l=0;switch(u.type){case p.ActType.Spawn:l=n.spawn(r,u,e);break;case p.ActType.Select:l=n.select(r,u,e);break;case p.ActType.Move:l=n.move(r,u,e);break;case p.ActType.Crush:l=n.crush(r,u,e);break;case p.ActType.Merge:l=n.merge(r,u,e);break;default:cc.error("\u932f\u8aa4\u7684\u68cb\u5b50\u884c\u52d5\u7a2e\u985e",u.type,e)}i+=l}r.call(function(){return o()}),r.start()})]})})},e.prototype.spawn=function(t,e,n){return n.appear(function(e){return t.then(e)})},e.prototype.select=function(t,e,n){return n.select(e.selected,function(e){return t.then(e)})},e.prototype.move=function(t,e,n){return n.move(e.pos,e.instant,function(e){return t.then(e)})},e.prototype.crush=function(t,e,n){var o=this,r=n.disappear(function(e){return t.then(e)});return t.call(function(){a.EventMgr.inst().emit(f.EventType[f.EventType.BoardCrush],n.type),o.recycle(n)},this),r},e.prototype.merge=function(t,e,n){var o=n.type,r=n.trans(e.trans,function(e){return t.then(e)});return t.call(function(){a.EventMgr.inst().emit(f.EventType[f.EventType.BoardCrush],o)}),r},i([_],e)}(cc.Component));n.BoardView=v,cc._RF.pop()},{"../define/Board":"Board","../define/Event":"Event","../define/Prefab":"Prefab","./../common/asset/AssetMgr":"AssetMgr","./../common/event/EventMgr":"EventMgr","./../common/pool/CmptPool":"CmptPool","./ChessView":"ChessView"}],Board:[function(t,e,n){"use strict";var o;cc._RF.push(e,"b39a2smN7JMyoXegfN1GhwX","Board"),Object.defineProperty(n,"__esModule",{value:!0}),n.KNIGHT_POS=n.ActType=n.CTRL_CHESS=n.BUFF_CHESS=n.NORM_CHESS=n.ChessType=n.BOARD_H=n.BOARD_W=n.BOARD_ROW=n.BOARD_COL=n.CHESS_H=n.CHESS_W=void 0,n.CHESS_W=96,n.CHESS_H=96,n.BOARD_COL=7,n.BOARD_ROW=9,n.BOARD_W=n.BOARD_COL*n.CHESS_W,n.BOARD_H=n.BOARD_ROW*n.CHESS_H,function(t){t[t.Blue=0]="Blue",t[t.Green=1]="Green",t[t.Red=2]="Red",t[t.Yellow=3]="Yellow",t[t.BoomH=100]="BoomH",t[t.BoomV=101]="BoomV",t[t.BoomO=102]="BoomO",t[t.Oxygen=103]="Oxygen",t[t.Pause=104]="Pause",t[t.Stone=998]="Stone",t[t.Knight=999]="Knight",t[t.None=1e3]="None"}(o=n.ChessType||(n.ChessType={})),n.NORM_CHESS={max:o.Yellow,min:o.Blue},n.BUFF_CHESS={max:o.Pause,min:o.BoomH},n.CTRL_CHESS={max:o.Knight,min:o.Stone},function(t){t[t.Spawn=0]="Spawn",t[t.Select=1]="Select",t[t.Move=2]="Move",t[t.Crush=3]="Crush",t[t.Merge=4]="Merge"}(n.ActType||(n.ActType={})),n.KNIGHT_POS={x:3,y:7},cc._RF.pop()},{}],BoomH:[function(t,e,n){"use strict";cc._RF.push(e,"182a3Fu3nhEB4k0lv5Rzial","BoomH");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BoomH=void 0;var i=t("../../../define/Board"),c=t("../../BoardModel"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.business=function(t){var e=this;t.area.forEach(function(n){var o=e._model.getChess(n);null!=o&&o.type==i.ChessType.BoomH&&(c.BoardModel.loopX(function(r){var s={x:r,y:n.y},u=e._model.getChess(s);u&&0==u.flag&&u.type!=i.ChessType.Knight&&(u.flag=!0,t.area.push(s),c.BoardModel.isBuffType(u.type)&&u.id!=o.id&&(t.res=!1))}),o.hold=!0)})},e}(t("../SelectChain").SelectChain);n.BoomH=s,cc._RF.pop()},{"../../../define/Board":"Board","../../BoardModel":"BoardModel","../SelectChain":"SelectChain"}],BoomO:[function(t,e,n){"use strict";cc._RF.push(e,"19dcftTfoxP5JVfJvhFYsxw","BoomO");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BoomO=void 0;var i=t("../../../define/Board"),c=t("../../BoardModel"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.business=function(t){var e=this;t.area.forEach(function(n){var o=e._model.getChess(n);if(null!=o&&o.type==i.ChessType.BoomO){for(var r=-1;r<=1;r++)for(var s=-1;s<=1;s++){var u={x:n.x+r,y:n.y+s},a=e._model.getChess(u);a&&0==a.flag&&a.type!=i.ChessType.Knight&&(a.flag=!0,t.area.push(u),c.BoardModel.isBuffType(a.type)&&a.id!=o.id&&(t.res=!1))}o.hold=!0}})},e}(t("../SelectChain").SelectChain);n.BoomO=s,cc._RF.pop()},{"../../../define/Board":"Board","../../BoardModel":"BoardModel","../SelectChain":"SelectChain"}],BoomV:[function(t,e,n){"use strict";cc._RF.push(e,"bcdc29cXVNNwb0Dw41tuQ7D","BoomV");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BoomV=void 0;var i=t("../../../define/Board"),c=t("../../BoardModel"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.business=function(t){var e=this;t.area.forEach(function(n){var o=e._model.getChess(n);null!=o&&o.type==i.ChessType.BoomV&&(c.BoardModel.loopY(function(r){var s={x:n.x,y:r},u=e._model.getChess(s);u&&0==u.flag&&u.type!=i.ChessType.Knight&&(u.flag=!0,t.area.push(s),c.BoardModel.isBuffType(u.type)&&u.id!=o.id&&(t.res=!1))}),o.hold=!0)})},e}(t("../SelectChain").SelectChain);n.BoomV=s,cc._RF.pop()},{"../../../define/Board":"Board","../../BoardModel":"BoardModel","../SelectChain":"SelectChain"}],BuffSelect:[function(t,e,n){"use strict";cc._RF.push(e,"3f3b8QcsEJJjK6uHphXGVSu","BuffSelect");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BuffSelect=void 0;var i=t("../BoardModel"),c=t("./NormSelect"),s=t("./SelectChain"),u=t("./chain/BoomH"),a=t("./chain/BoomO"),l=t("./chain/BoomV"),p=t("./chain/Clean"),f=function(t){function e(){var e=t.call(this)||this;return e._buff=null,e._clean=null,e._norm=null,e._buff=new u.BoomH,e._buff.addChain(new l.BoomV),e._buff.addChain(new a.BoomO),e._clean=new p.Clean,e._norm=new c.NormSelect,e}return r(e,t),e.prototype.business=function(t){if(t.src.forEach(function(e){e&&i.BoardModel.isBuffType(e.type)&&t.area.push(e.dataPos)}),!(t.area.length<=0)){do{t.res=!0,this._buff.execute(t)}while(!t.res);t.cmd.pass(.2),this._clean.execute(t),t.src=[],this._norm.execute(t)}},e}(s.SelectChain);n.BuffSelect=f,cc._RF.pop()},{"../BoardModel":"BoardModel","./NormSelect":"NormSelect","./SelectChain":"SelectChain","./chain/BoomH":"BoomH","./chain/BoomO":"BoomO","./chain/BoomV":"BoomV","./chain/Clean":"Clean"}],BundleLoader:[function(t,e,n){"use strict";cc._RF.push(e,"b53e5PrDmlCxp8dOfgK/EhC","BundleLoader");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BundleLoader=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.execute=function(t){return new Promise(function(e,n){return cc.assetManager.loadBundle(t,function(t,o){return t?n(t):e(o)})})},e}(t("../AssetLoader").AssetLoader);n.BundleLoader=i,cc._RF.pop()},{"../AssetLoader":"AssetLoader"}],CanvasAdapt:[function(t,e,n){"use strict";cc._RF.push(e,"051abnc4gpKAJ2qWQMnuVT2","CanvasAdapt");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasAdapt=void 0;var c=t("../../event/EventMgr"),s=cc._decorator,u=s.ccclass,a=(s.property,s.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){var t=cc.Canvas.instance;t.fitWidth=!0,t.fitHeight=!0,cc.view.setResizeCallback(function(){return c.EventMgr.inst().emit("RESIZE")})},i([u,a("adapt/canvas")],e)}(cc.Component);n.CanvasAdapt=l,cc._RF.pop()},{"../../event/EventMgr":"EventMgr"}],ChessModel:[function(t,e,n){"use strict";cc._RF.push(e,"a2492SRQvhCVLbJYD7iC9E3","ChessModel"),Object.defineProperty(n,"__esModule",{value:!0}),n.ChessModel=void 0;var o=t("./../common/utility/DataDriven"),r=t("../define/Board"),i=function(){function t(){this.id=-1,this._type=o.DataDriven.generate(r.ChessType.None),this.dataPos={x:-1,y:-1},this.dropPos={x:-1,y:-1},this.flag=!1,this.hold=!1,this.trans=null,this.id=t._counter++}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type.get()},set:function(t){this.setType(t)},enumerable:!1,configurable:!0}),t.prototype.setPos=function(t){this.dataPos=Object.assign({},t),this.dropPos=Object.assign({},t)},t.prototype.setType=function(t){this._type.set(t)},t.prototype.toString=function(){return this.type!=r.ChessType.None?(Array(3).join("_")+this.type).slice(-3):"xxx"},t._counter=0,t}();n.ChessModel=i,cc._RF.pop()},{"../define/Board":"Board","./../common/utility/DataDriven":"DataDriven"}],ChessView:[function(t,e,n){"use strict";cc._RF.push(e,"810f2oViqJPPowfbtWl0sze","ChessView");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ChessView=void 0;var u=t("../AssetBridge"),a=t("../define/Board"),l=t("./BoardModel"),p=cc._decorator,f=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._model=null,e.avatar=null,e}var n;return r(e,t),n=e,Object.defineProperty(e.prototype,"id",{get:function(){return this._model.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._model.type},enumerable:!1,configurable:!0}),e.prototype.onDisable=function(){this._model._type.clear()},e.prototype.init=function(t){return c(this,void 0,Promise,function(){var e=this;return s(this,function(n){switch(n.label){case 0:return this.node.name=t.id.toString(),this._model=t,this._model._type.listen(function(t){return e.setType(t)}),this.node.x=a.CHESS_W*(t.dropPos.x+.5),this.node.y=a.CHESS_H*(t.dropPos.y+.5),[4,this.setType(this._model.type)];case 1:return n.sent(),this.node.active=!0,[2]}})})},e.prototype.setType=function(t){return c(this,void 0,Promise,function(){var e;return s(this,function(n){switch(n.label){case 0:return this.node.scale=1,this.node.zIndex=l.BoardModel.isCtrlType(t)?t:0,e=this.avatar,[4,u.AssetBridge.inst.getChess(t)];case 1:return e.spriteFrame=n.sent(),[2]}})})},e.prototype.appear=function(t){var e=cc.tween();return e.to(.1,{scale:1}),t(e),.1},e.prototype.disappear=function(t){var e=cc.tween();return e.to(.1,{scale:0}),t(e),.1},e.prototype.select=function(t,e){var n=cc.tween();return n.to(.1,{scale:t?.7:1}),e(n),.1},e.prototype.move=function(t,e,o){var r=0,i=cc.v3((t.x+.5)*a.CHESS_W,(t.y+.5)*a.CHESS_H,0);return e?this.node.position=i:(r=i.sub(this.node.position).mag()*n.SPEED,o(cc.tween().to(r,{position:i},{easing:cc.easing.quadIn}))),r},e.prototype.trans=function(t,e){var n=this,o=cc.tween(),r=0;return r+=this.disappear(function(t){return o.then(t)}),o.call(function(){n._model.type=t,n._model.flag=!1,n._model.hold=!1,n._model.trans=null},this),r+=this.appear(function(t){return o.then(t)}),e(o),r},e.SPEED=.5/a.BOARD_H,i([h(cc.Sprite)],e.prototype,"avatar",void 0),n=i([f],e)}(cc.Component);n.ChessView=d,cc._RF.pop()},{"../AssetBridge":"AssetBridge","../define/Board":"Board","./BoardModel":"BoardModel"}],Clean:[function(t,e,n){"use strict";cc._RF.push(e,"f02d170t7VNGaAsD/MQOpWr","Clean");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Clean=void 0;var i=t("../../BoardModel"),c=t("../../action/Crush"),s=t("../../action/Merge"),u=t("../SelectChain"),a=t("./Drop"),l=function(t){function e(){var e=t.call(this)||this;return e.addChain(new a.Drop),e}return r(e,t),e.prototype.business=function(t){var e=this,n=[],o=[];t.area=t.area.filter(function(e,n){return t.area.indexOf(e)==n}),i.BoardModel.loopXY(function(t){var r=e._model.getChess(t);r&&(null==r.trans&&r.flag&&n.push(t),r.trans&&0==r.flag&&o.push(t))}),this.crush(n)&&this._cmd.pass(.2),this.merge(o)&&this._cmd.pass(.3)},e.prototype.crush=function(t){var e=this,n=!1;return t.forEach(function(t){var o=e._model.getChess(t);e._cmd.add(o,new c.Crush),e._model.setChess(t,null),n=!0},this),n},e.prototype.merge=function(t){var e=this,n=!1;return t.forEach(function(t){var o=e._model.getChess(t);o.flag=!0,e._cmd.add(o,new s.Merge(o.trans)),n=!0},this),n},e}(u.SelectChain);n.Clean=l,cc._RF.pop()},{"../../BoardModel":"BoardModel","../../action/Crush":"Crush","../../action/Merge":"Merge","../SelectChain":"SelectChain","./Drop":"Drop"}],CmptPool:[function(t,e,n){"use strict";cc._RF.push(e,"0981cpHy+FN0pnQWQrvZoEg","CmptPool");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.CmptPool=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.fetch=function(e,n){return i(this,void 0,Promise,function(){var o,r;return c(this,function(i){switch(i.label){case 0:return[4,t.prototype.fetch.call(this,e,n)];case 1:return o=i.sent(),(r=o.getComponent(e))&&r.reuse?[4,r.reuse()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,o]}})})},e.prototype.recycle=function(e,n){return i(this,void 0,Promise,function(){var o;return c(this,function(r){switch(r.label){case 0:return(o=n.getComponent(e))&&o.unuse?[4,o.unuse()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,t.prototype.recycle.call(this,e,n)]}})})},e}(t("./ObjPool").ObjPool);n.CmptPool=s,cc._RF.pop()},{"./ObjPool":"ObjPool"}],CrushH:[function(t,e,n){"use strict";cc._RF.push(e,"fe480nhDzxISYgtSRMt4MDw","CrushH");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CrushH=void 0;var i=t("../../../define/Board"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.business=function(t){var e=this;t.area.forEach(function(n){var o=e._model.getCrushesH(n,!0),r=o.length;if(r>=4){var c=e._model.getChess(n),s=r>=5?i.ChessType.BoomO:i.ChessType.BoomV;c.trans=s}r>=3&&(o.forEach(function(t){var n=e._model.getChess(t);n&&(n.flag=null==n.trans)}),t.res=!0)})},e}(t("../SelectChain").SelectChain);n.CrushH=c,cc._RF.pop()},{"../../../define/Board":"Board","../SelectChain":"SelectChain"}],CrushV:[function(t,e,n){"use strict";cc._RF.push(e,"cfe1evqzmZCL6l0jcHUPngj","CrushV");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CrushV=void 0;var i=t("../../../define/Board"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.business=function(t){var e=this;t.area.forEach(function(n){var o=e._model.getCrushesV(n,!0),r=o.length;if(r>=4){var c=e._model.getChess(n),s=r>=5?i.ChessType.BoomO:i.ChessType.BoomH;c.trans=s}r>=3&&(o.forEach(function(t){var n=e._model.getChess(t);n&&(n.flag=null==n.trans)}),t.res=!0)})},e}(t("../SelectChain").SelectChain);n.CrushV=c,cc._RF.pop()},{"../../../define/Board":"Board","../SelectChain":"SelectChain"}],Crush:[function(t,e,n){"use strict";cc._RF.push(e,"4c5128PKYxOo6QPYLTbHmBE","Crush");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Crush=void 0;var i=t("../../define/Board"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return i.ActType.Crush},enumerable:!1,configurable:!0}),e}(t("../BoardCmd").ChessAct);n.Crush=c,cc._RF.pop()},{"../../define/Board":"Board","../BoardCmd":"BoardCmd"}],CtrlSelect:[function(t,e,n){"use strict";cc._RF.push(e,"8aa29olnRdCTobgEOeiWB1T","CtrlSelect");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CtrlSelect=void 0;var i=t("../BoardModel"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.business=function(t){t.src.forEach(function(e){e&&i.BoardModel.isCtrlType(e.type)&&t.area.push(e.dataPos)}),t.area.length},e}(t("./SelectChain").SelectChain);n.CtrlSelect=c,cc._RF.pop()},{"../BoardModel":"BoardModel","./SelectChain":"SelectChain"}],DataDriven:[function(t,e,n){"use strict";cc._RF.push(e,"e0d0ca0G6xFbrcLobJu8zVH","DataDriven"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataDriven=void 0;var o=function(){function t(t,e){this._data=null,this._callback=[],this._skip=null,this._data=t,this._skip=e}return t.generate=function(e,n){return new t(e,n)},t.prototype.clear=function(){this._callback.length=0},t.prototype.get=function(){return this._data},t.prototype.set=function(t){var e=this;t!=this._data&&(this._skip&&this._skip(t)||(this._callback.forEach(function(n){return n(t,e._data)}),this._data=t))},t.prototype.listen=function(t){this._callback.push(t)},t}();n.DataDriven=o,cc._RF.pop()},{}],DebugPnl:[function(t,e,n){"use strict";cc._RF.push(e,"b1a0bjtUJ5BHZrQcfWBlVnU","DebugPnl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.DebugPnl=void 0;var c=t("./../common/event/EventMgr"),s=t("../define/Event"),u=cc._decorator,a=u.ccclass,l=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editor1=null,e.editor2=null,e.editor3=null,e}return r(e,t),e.prototype.onLoad=function(){this.node.active=!1},e.prototype.onBtnClick1=function(){var t=Number(this.editor1.string),e=Number(this.editor2.string),n=Number(this.editor3.string);c.EventMgr.inst().emit(s.EventType[s.EventType.DebugChess],t,e,n)},e.prototype.onBtnClick2=function(){c.EventMgr.inst().emit(s.EventType[s.EventType.DebugPrint])},e.prototype.onBtnClick3=function(){c.EventMgr.inst().emit(s.EventType[s.EventType.DebugClean])},e.prototype.onBtnClick4=function(){c.EventMgr.inst().emit(s.EventType[s.EventType.DebugLight])},i([l(cc.EditBox)],e.prototype,"editor1",void 0),i([l(cc.EditBox)],e.prototype,"editor2",void 0),i([l(cc.EditBox)],e.prototype,"editor3",void 0),i([a],e)}(cc.Component);n.DebugPnl=p,cc._RF.pop()},{"../define/Event":"Event","./../common/event/EventMgr":"EventMgr"}],DebugTool:[function(t,e,n){"use strict";cc._RF.push(e,"f67df6EBUFNa6BzzEp7vxjs","DebugTool");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.DebugTool=void 0;var c=cc._decorator,s=c.ccclass,u=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.panel=null,e}return r(e,t),e.prototype.onLoad=function(){this.node.active=!1},e.prototype.onActiveClick=function(){this.panel.active=!this.panel.active},i([u(cc.Node)],e.prototype,"panel",void 0),i([s],e)}(cc.Component);n.DebugTool=a,cc._RF.pop()},{}],Drop:[function(t,e,n){"use strict";cc._RF.push(e,"ba1cd1uC1VKCrr1Pf/f2SeV","Drop");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Drop=void 0;var i=t("../../../define/Board"),c=t("../../BoardModel"),s=t("../../action/Move"),u=t("../SelectChain"),a=t("./Stuff"),l=function(t){function e(){var e=t.call(this)||this;return e.addChain(new a.Stuff),e}return r(e,t),e.prototype.business=function(t){var e=this;t.area=[],c.BoardModel.loopXY(function(n){if(!e._model.getChess(n))for(var o=n.y;o<i.BOARD_ROW;o++){var r={x:n.x,y:o},u=e._model.getChess(r);if(u){if(u.hold||c.BoardModel.isCtrlType(u.type))continue;e._model.setChess(n,u),e._model.setChess(r,null),e._cmd.add(u,new s.Move(n)),t.area.push(n);break}}})},e}(u.SelectChain);n.Drop=l,cc._RF.pop()},{"../../../define/Board":"Board","../../BoardModel":"BoardModel","../../action/Move":"Move","../SelectChain":"SelectChain","./Stuff":"Stuff"}],EventBase:[function(t,e,n){"use strict";cc._RF.push(e,"2068cXC/BBHn6nlxlFcQD4g","EventBase");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.onTrigger=n.enableEvent=n.loadEvent=n.EventBase=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.register=function(t,e){void 0===e&&(e=!0);var n=function(e){for(var n=e.length-1;n>=0;n--){var o=e[n];this.onDecide(t,o.key,t[o.func],o.once)}}.bind(this);e?this.classify.forEach(function(e,o){t instanceof o&&n(e)}):n(this.classify.get(t.constructor))},e.unregister=function(t){t&&this.onCancel(t)},e.classify=new Map,e.onDecide=null,e.onCancel=null,e}(t("../utility/Singleton").Singleton);function c(t,e,n,o){void 0===o&&(o=!0);var r=t.prototype[e];t.prototype[e]=function(){i.register(this,o),r&&r.call(this)};var c=t.prototype[n];t.prototype[n]=function(){i.unregister(this),c&&c.call(this)}}n.EventBase=i,n.loadEvent=function(t){return void 0===t&&(t=!0),function(e){c(e,"onLoad","onDestroy",t)}},n.enableEvent=function(t){return void 0===t&&(t=!0),function(e){c(e,"onEnable","onDisable",t)}},n.onTrigger=function(t,e){return void 0===e&&(e=!1),function(n,o){var r=i.classify.get(n.constructor);if(r){if(r.find(function(e){return e.key==t&&e.func==o}))return void cc.error("\u4e8b\u4ef6\u91cd\u8907\u8a3b\u518a",n,t)}else r=[],i.classify.set(n.constructor,r);r.push({key:t,func:o,once:e})}},cc._RF.pop()},{"../utility/Singleton":"Singleton"}],EventMgr:[function(t,e,n){"use strict";cc._RF.push(e,"62bd2Y9/1BMzp5Q5Z4Au8d4","EventMgr");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EventMgr=void 0;var s=t("./EventBase"),u=function(t){function e(){var e=t.call(this)||this;return e._events=new Map,s.EventBase.onDecide=e.on.bind(e),s.EventBase.onCancel=function(t){e._events.forEach(function(n,o){n.delete(t),n.size<=0&&e._events.delete(o)})},e}return r(e,t),e.prototype.onDestroy=function(){this._events.forEach(function(t){t.forEach(function(t){return t.length=0}),t.clear()}),this._events.clear()},e.prototype.on=function(t,e,n,o){if(void 0===o&&(o=!1),null!=t&&null!=n){var r=this._events.get(e),i=null;if(r)if(i=r.get(t)){if(i.find(function(t){return t.cb==n}))return void cc.error("\u4e8b\u4ef6\u91cd\u8907\u8a3b\u518a",t,e)}else i=[],r.set(t,i);else r=new Map,this._events.set(e,r),i=[],r.set(t,i);i.push({cb:n,once:o})}},e.prototype.once=function(t,e,n){this.on(t,e,n,!0)},e.prototype.off=function(t,e,n){if(null!=t&&null!=e){var o=this._events.get(e);if(null!=o){var r=o.get(t);if(!(null==r||r.length<=0)){var i=r.findIndex(function(t){return t.cb==n});i<=-1||(r.splice(i,-1),r.length<=0&&(o.delete(t),o.size<=0&&this._events.delete(e)))}}}},e.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.getListeners(t,this._events.get(t)).forEach(function(t){return t.cb.apply(t.target,e)})},e.prototype.emitAsync=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i(this,void 0,Promise,function(){var n;return c(this,function(o){switch(o.label){case 0:return n=[],this.getListeners(t,this._events.get(t)).forEach(function(t){return n.push(t.cb.apply(t.target,e))}),[4,Promise.all(n)];case 1:return o.sent(),[2]}})})},e.prototype.getListeners=function(t,e){var n=this;if(null==e)return[];var o=[],r=[];return e.forEach(function(t,e){t.forEach(function(t){r.push({target:e,cb:t.cb}),t.once&&o.push({target:e,cb:t.cb})})}),o.forEach(function(e){return n.off(e.target,t,e.cb)},this),r},e}(s.EventBase);n.EventMgr=u,u.inst(),cc._RF.pop()},{"./EventBase":"EventBase"}],Event:[function(t,e,n){"use strict";cc._RF.push(e,"ca548PkIW5NH4Dle3AlH9fr","Event"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventType=void 0,function(t){t[t.DebugChess=0]="DebugChess",t[t.DebugPrint=1]="DebugPrint",t[t.DebugClean=2]="DebugClean",t[t.DebugLight=3]="DebugLight",t[t.BoardCrush=4]="BoardCrush"}(n.EventType||(n.EventType={})),cc._RF.pop()},{}],FolderLoader:[function(t,e,n){"use strict";cc._RF.push(e,"4f762TJ/ttHCZCn4TbgkBNb","FolderLoader");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FolderLoader=void 0;var i=t("../AssetLoader"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.execute=function(t,e){return new Promise(function(n,o){var r=i.AssetLoader.parseUrl(t),c=r.path,s=r.bundle,u=s?cc.assetManager.getBundle(s):cc.resources;u?u.loadDir(c,e,function(r,i){r&&o(r);var s=[],a=u.getDirWithPath(c,e);i.forEach(function(e,n){return s.push({url:""+t+a[n].path,asset:e})}),n(s)}):o()})},e}(i.AssetLoader);n.FolderLoader=c,cc._RF.pop()},{"../AssetLoader":"AssetLoader"}],GameMgr:[function(t,e,n){"use strict";cc._RF.push(e,"f4d89eOPHlCiKlhjZEQHMzm","GameMgr");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMgr=void 0;var c=t("./common/asset/AssetMgr"),s=t("./common/audio/BgmAudio"),u=t("./common/audio/SfxAudio"),a=t("./common/event/EventMgr"),l=t("./common/pool/CmptPool"),p=t("./define/Audio"),f=cc._decorator,h=f.ccclass,d=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){cc.game.setFrameRate(60),cc.debug.setDisplayStats(!0),cc.dynamicAtlasManager.enabled=!0;var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDebugDraw=!1},e.prototype.start=function(){c.AssetMgr.inst().loadAsset(p.AudioSrc.LoopBgm,cc.AudioClip,!0).then(function(t){s.BgmAudio.inst().play(t)})},e.prototype.onDestroy=function(){u.SfxAudio.destroy(),s.BgmAudio.destroy(),a.EventMgr.destroy(),l.CmptPool.destroy(),c.AssetMgr.destroy()},i([h],e)}(cc.Component));n.GameMgr=d,cc._RF.pop()},{"./common/asset/AssetMgr":"AssetMgr","./common/audio/BgmAudio":"BgmAudio","./common/audio/SfxAudio":"SfxAudio","./common/event/EventMgr":"EventMgr","./common/pool/CmptPool":"CmptPool","./define/Audio":"Audio"}],GasView:[function(t,e,n){"use strict";cc._RF.push(e,"edd83ZmoCZCZJSZ/taUfxKj","GasView");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.GasView=void 0;var u=t("../../define/Board"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return r(e,t),n=e,e.prototype.onLoad=function(){this.reset()},e.prototype.reset=function(){this.node.y=-n.HALF},e.prototype.fight=function(){return c(this,void 0,Promise,function(){var t=this;return s(this,function(e){switch(e.label){case 0:return this.reset(),[4,new Promise(function(e){cc.tween(t.node).to(2,{y:n.HALF}).call(function(){return e()}).start()})];case 1:return e.sent(),[2]}})})},e.prototype.down=function(t){return void 0===t&&(t=1),c(this,void 0,Promise,function(){var e=this;return s(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){cc.tween(e.node).by(.3*t,{y:-u.CHESS_H*t}).call(function(){return n()}).start()})];case 1:return n.sent(),[2]}})})},e.prototype.up=function(t){return void 0===t&&(t=1),c(this,void 0,Promise,function(){var e=this;return s(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){cc.tween(e.node).by(.3*t,{y:u.CHESS_H*t}).call(function(){return n()}).start()})];case 1:return n.sent(),[2]}})})},e.HALF=u.BOARD_H/2,n=i([l],e)}(cc.Component));n.GasView=p,cc._RF.pop()},{"../../define/Board":"Board"}],LightsView:[function(t,e,n){"use strict";cc._RF.push(e,"c72b1PtgXNGyLb02SspT10x","LightsView");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LightsView=void 0;var u=t("./../../common/component/SpineCmpt"),a=cc._decorator,l=a.ccclass,p=a.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.main=null,e.sub=[],e._count=0,e}return r(e,t),e.prototype.reset=function(){var t=this;this._count=this.sub.length,this.sub.forEach(function(e,n){return t.fire(n)},this)},e.prototype.fight=function(){return c(this,void 0,Promise,function(){var t=this;return s(this,function(e){switch(e.label){case 0:return this.node.active=!0,this.sub.forEach(function(t){return t.node.active=!1}),[4,this.main.playSteps(["Appear","LightUp"])];case 1:return e.sent(),this.sub.forEach(function(e,n){return t.fire(n)},this),this._count=this.sub.length-1,this.main.playOnce("Empty"),[2]}})})},e.prototype.fire=function(t){return c(this,void 0,Promise,function(){var e;return s(this,function(){return(e=this.sub[t]).node.active=!0,e.playLoop("Loop"),[2]})})},e.prototype.extinct=function(t){return c(this,void 0,Promise,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,(e=this.sub[t]).playOnce("Extinct")];case 1:return n.sent(),e.node.active=!1,[2]}})})},e.prototype.inc=function(){return c(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return this._count<this.sub.length?[4,this.fire(this._count++)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.dec=function(){return c(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return this._count>=0?[4,this.extinct(this._count--)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.full=function(){return c(this,void 0,Promise,function(){var t=this;return s(this,function(e){switch(e.label){case 0:return[4,this.main.playOnce("LightUp")];case 1:return e.sent(),this.sub.forEach(function(e,n){return t.fire(n)},this),this._count=this.sub.length-1,this.main.playOnce("Empty"),[2]}})})},i([p(u.SpineCmpt)],e.prototype,"main",void 0),i([p([u.SpineCmpt])],e.prototype,"sub",void 0),i([l],e)}(cc.Component);n.LightsView=f,cc._RF.pop()},{"./../../common/component/SpineCmpt":"SpineCmpt"}],LoseView:[function(t,e,n){"use strict";cc._RF.push(e,"35a25rNozlJOLobtxwj5fw+","LoseView");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LoseView=void 0;var u=t("./../../common/utility/WaitUtil"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.node.active=!1,this.node.x=0},e.prototype.play=function(){return c(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return this.node.active=!0,[4,u.WaitUtil.waitSec(2.5)];case 1:return t.sent(),[2]}})})},i([l],e)}(cc.Component));n.LoseView=p,cc._RF.pop()},{"./../../common/utility/WaitUtil":"WaitUtil"}],Merge:[function(t,e,n){"use strict";cc._RF.push(e,"8f26f2VLvtDz6tmqClwwnCG","Merge");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Merge=void 0;var i=t("../../define/Board"),c=function(t){function e(e){var n=t.call(this)||this;return n.trans=null,n.trans=e,n}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return i.ActType.Merge},enumerable:!1,configurable:!0}),e}(t("../BoardCmd").ChessAct);n.Merge=c,cc._RF.pop()},{"../../define/Board":"Board","../BoardCmd":"BoardCmd"}],Move:[function(t,e,n){"use strict";cc._RF.push(e,"e6266nQJD9JN4L48VgTgcaM","Move");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Move=void 0;var i=t("../../define/Board"),c=function(t){function e(e,n){void 0===n&&(n=!1);var o=t.call(this)||this;return o.pos=null,o.instant=!1,o.pos=e,o.instant=n,o}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return i.ActType.Move},enumerable:!1,configurable:!0}),e}(t("../BoardCmd").ChessAct);n.Move=c,cc._RF.pop()},{"../../define/Board":"Board","../BoardCmd":"BoardCmd"}],NormSelect:[function(t,e,n){"use strict";cc._RF.push(e,"b2e6c1K2IBHFaSjpFRw2+c0","NormSelect");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NormSelect=void 0;var i=t("../BoardModel"),c=t("./SelectChain"),s=t("./chain/Clean"),u=t("./chain/CrushH"),a=t("./chain/CrushV"),l=function(t){function e(){var e=t.call(this)||this;return e._crush=null,e._clean=null,e._crush=new u.CrushH,e._crush.addChain(new a.CrushV),e._clean=new s.Clean,e}return r(e,t),e.prototype.business=function(t){if(t.src.forEach(function(e){e&&i.BoardModel.isNormType(e.type)&&t.area.push(e.dataPos)}),!(t.area.length<=0)){t.res=!1,this._crush.execute(t);do{t.res&&t.cmd.pass(.2),this._clean.execute(t),t.res=!1,this._crush.execute(t),t.res&&t.cmd.pass(.2)}while(t.res)}},e}(c.SelectChain);n.NormSelect=l,cc._RF.pop()},{"../BoardModel":"BoardModel","./SelectChain":"SelectChain","./chain/Clean":"Clean","./chain/CrushH":"CrushH","./chain/CrushV":"CrushV"}],NumExtend:[function(t,e){"use strict";cc._RF.push(e,"3d7fbyf9INMWpDoRf9hbYlV","NumExtend"),Number.prototype.limit=function(t,e){var n=this.valueOf();return n>=e?e:n<=t?t:n},cc._RF.pop()},{}],ObjPool:[function(t,e,n){"use strict";cc._RF.push(e,"641590VH4xJ7IcRL9keB5/3","ObjPool");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ObjPool=void 0;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pool=new Map,e._limit=10,e}return r(e,t),e.prototype.onDestroy=function(){var t=this;Array.from(this._pool.keys()).forEach(function(e){return t.clear(e)},this),this._pool.clear()},e.prototype.size=function(t){return this._pool.has(t)?this._pool.get(t).length:0},e.prototype.clear=function(t){var e,n=this._pool.get(t);if(n){for(var o=0,r=n;o<r.length;o++){var i=r[o];null===(e=i)||void 0===e||e.destroy(),i=null}n.length=0,this._pool.delete(t)}},e.prototype.fetch=function(t,e){return i(this,void 0,Promise,function(){var n;return c(this,function(){return(n=this._pool.get(t))&&n.length>0?[2,n.shift()]:[2,e?e():null]})})},e.prototype.recycle=function(t,e){var n,o;return i(this,void 0,Promise,function(){var r;return c(this,function(){if(t&&e){if(null==(r=this._pool.get(t)))r=[],this._pool.set(t,r);else if(-1!=r.indexOf(e)||r.length>=this._limit)return null===(n=e)||void 0===n||n.destroy(),e=null,[2,!1];return null===(o=e)||void 0===o||o.removeFromParent(!1),r.push(e),[2,!0]}return[2,!1]})})},e}(t("../utility/Singleton").Singleton);n.ObjPool=s,cc._RF.pop()},{"../utility/Singleton":"Singleton"}],Prefab:[function(t,e,n){"use strict";cc._RF.push(e,"d1c21wNRntJzL9ufV/82G2q","Prefab"),Object.defineProperty(n,"__esModule",{value:!0}),n.PrefabSrc=void 0,(n.PrefabSrc||(n.PrefabSrc={})).Chess="prefab/chess",cc._RF.pop()},{}],RandUtil:[function(t,e,n){"use strict";cc._RF.push(e,"d02bcT3659F+Zj/6OZpBGaA","RandUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.RandUtil=void 0;var o=function(){function t(){}return t.randFloat=function(t,e){return void 0===e&&(e=0),Math.random()*(t-e)+e},t.randInt=function(t,e){return void 0===e&&(e=0),Math.floor(this.randFloat(Math.floor(t),Math.ceil(e)))},t.randRate=function(t){return this.randFloat(100)<t},t.randType=function(t){return t[this.randInt(t.length)]},t.randWeight=function(t){var e=0;t.forEach(function(t){return e+=t});for(var n=this.randFloat(e),o=0,r=t.length,i=0;i<r;i++)if(n<(o+=t[i]))return i;return r-1},t}();n.RandUtil=o,cc._RF.pop()},{}],Reset:[function(t,e,n){"use strict";cc._RF.push(e,"ff4faPEMs5GGJAxLTcfREPX","Reset");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Reset=void 0;var i=t("../../../define/Board"),c=t("../../BoardModel"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.business=function(){var t=this;c.BoardModel.loopXY(function(e){var n=t._model.getChess(e);n&&(n.flag=!1,n.hold=n.type==i.ChessType.Stone,n.trans=null)})},e}(t("../SelectChain").SelectChain);n.Reset=s,cc._RF.pop()},{"../../../define/Board":"Board","../../BoardModel":"BoardModel","../SelectChain":"SelectChain"}],RuleView:[function(t,e,n){"use strict";cc._RF.push(e,"e1165ypFABOI6O3yOMYMkYq","RuleView");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.RuleView=void 0;var u=t("./../../common/asset/AssetMgr"),a=t("../../define/Board"),l=t("../../define/Texture"),p=cc._decorator,f=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=null,e.count=null,e._finished=!1,e}return r(e,t),e.prototype.onLoad=function(){this.reset()},e.prototype.reset=function(){this._finished=!1,this.setColor(),this.node.active=!1},e.prototype.fight=function(t){return c(this,void 0,Promise,function(){var e,n;return s(this,function(o){switch(o.label){case 0:return this.reset(),e=l.TextureSrc[a.ChessType[t.type]],n=this.type,[4,u.AssetMgr.inst().loadAsset(e,cc.SpriteFrame,!0)];case 1:return n.spriteFrame=o.sent(),this.setCount(t.count),this.node.active=!0,[2]}})})},e.prototype.setCount=function(t){t=t>=0?t:0,this.count.string="x"+t,t<=0&&0==this._finished&&(this._finished=!0,this.setColor())},e.prototype.setColor=function(){var t=this._finished?cc.color(0,0,0):cc.color(255,255,255);this.type.node.color=t,this.count.node.color=t},i([h(cc.Sprite)],e.prototype,"type",void 0),i([h(cc.Label)],e.prototype,"count",void 0),i([f],e)}(cc.Component);n.RuleView=d,cc._RF.pop()},{"../../define/Board":"Board","../../define/Texture":"Texture","./../../common/asset/AssetMgr":"AssetMgr"}],SelectChain:[function(t,e,n){"use strict";cc._RF.push(e,"f5ffbrx4YVLyJ17SHoRndme","SelectChain"),Object.defineProperty(n,"__esModule",{value:!0}),n.SelectChain=void 0;var o=function(){function t(){this._next=null,this._params=null}return Object.defineProperty(t.prototype,"_model",{get:function(){return this._params.model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_cmd",{get:function(){return this._params.cmd},enumerable:!1,configurable:!0}),t.prototype.addChain=function(t){this._next?this._next.addChain(t):this._next=t},t.prototype.execute=function(t){this._params=t,this.business(t),this._next&&this._next.execute(t)},t}();n.SelectChain=o,cc._RF.pop()},{}],SelectHandler:[function(t,e,n){"use strict";cc._RF.push(e,"9aa15uowHJObYdCndfN5+Qg","SelectHandler");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SelectHandler=void 0;var i=t("./../../common/utility/Singleton"),c=t("../../define/Board"),s=t("../BoardCmd"),u=t("../BoardModel"),a=t("../action/Move"),l=t("../action/Select"),p=t("./BuffSelect"),f=t("./CtrlSelect"),h=t("./NormSelect"),d=t("./chain/Reset"),y=function(t){function e(){var e=t.call(this)||this;return e._selected=null,e._model=null,e._cmd=null,e._chain=null,e.succeed=!1,e._chain=new d.Reset,e._chain.addChain(new f.CtrlSelect),e._chain.addChain(new h.NormSelect),e._chain.addChain(new p.BuffSelect),e}return r(e,t),e.prototype.slide=function(t){return this._selected&&(this._selected.x!=t.x||this._selected.y!=t.y)},e.prototype.onDestroy=function(){this._selected=null,this._model=null,this._cmd=null},e.prototype.execute=function(t,e){this._model=t,this.succeed=!1,this._cmd=new s.BoardCmd;var n=[this._cmd],o=this._selected,r=e,i=t.getChess(o),u=t.getChess(r);try{if(u.type==c.ChessType.Stone)return;if(this.select1(r)||0==this.select2(r))return;if(this._cmd.add(u,new l.Select(!1)),u.id!=i.id&&this._cmd.add(i,new l.Select(!1)),this.swap(o,r),0==this.linked(o)&&0==this.linked(r))return this.swap(o,r),void(this._selected=null);n.push(this.crush(i,u)),this._selected=null,this.succeed=!0}finally{return n}},e.prototype.select1=function(t){return!this._selected&&(this._selected=t,this._cmd.add(this._model.getChess(t),new l.Select(!0)),!0)},e.prototype.select2=function(t){var e=this._selected,n=t,o=this._model.getChess(e),r=this._model.getChess(n);if(r.id==o.id)return!!u.BoardModel.isBuffType(r.type)||(this._cmd.add(r,new l.Select(!1)),this._selected=null,!1);var i=!0;return i&&r.type==c.ChessType.Knight?i=!1:i&&o.type!=c.ChessType.Knight&&(i=Math.abs(n.x-e.x)+Math.abs(n.y-e.y)<=1),0==i&&(this._cmd.add(o,new l.Select(!1)),this._cmd.add(r,new l.Select(!0)),this._selected=t),i},e.prototype.swap=function(t,e){var n=this._model.getChess(t),o=this._model.getChess(e);n.id!=o.id&&(this._model.setChess(t,o),this._model.setChess(e,n),this._cmd.add(n,new a.Move(e)),this._cmd.add(o,new a.Move(t)))},e.prototype.linked=function(t){var e=this._model.getChess(t);return!(!u.BoardModel.isBuffType(e.type)&&!u.BoardModel.isCtrlType(e.type))||this._model.getCrushesH(t,!0).length>=3||this._model.getCrushesV(t,!0).length>=3},e.prototype.crush=function(t,e){u.BoardModel.isBuffType(t.type)&&(t.hold=!0),u.BoardModel.isBuffType(e.type)&&(e.hold=!0);var n={model:this._model,cmd:new s.BoardCmd,src:t.id==e.id?[e]:[t,e],area:[],res:!1};return this._chain.execute(n),n.cmd},e}(i.Singleton);n.SelectHandler=y,cc._RF.pop()},{"../../define/Board":"Board","../BoardCmd":"BoardCmd","../BoardModel":"BoardModel","../action/Move":"Move","../action/Select":"Select","./../../common/utility/Singleton":"Singleton","./BuffSelect":"BuffSelect","./CtrlSelect":"CtrlSelect","./NormSelect":"NormSelect","./chain/Reset":"Reset"}],Select:[function(t,e,n){"use strict";cc._RF.push(e,"f3b627XLX5JFYWVvHK+Zm4v","Select");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Select=void 0;var i=t("../../define/Board"),c=function(t){function e(e){var n=t.call(this)||this;return n.selected=!1,n.selected=e,n}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return i.ActType.Select},enumerable:!1,configurable:!0}),e}(t("../BoardCmd").ChessAct);n.Select=c,cc._RF.pop()},{"../../define/Board":"Board","../BoardCmd":"BoardCmd"}],SfxAudio:[function(t,e,n){"use strict";cc._RF.push(e,"a3894Er/h1ISocblYeT5vxk","SfxAudio");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SfxAudio=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"vol",{get:function(){return cc.audioEngine.getEffectsVolume()},set:function(t){cc.audioEngine.setEffectsVolume(t.limit(0,1))},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){},e.prototype.play=function(t,e){var n=cc.audioEngine.playEffect(t,!1);return e&&cc.audioEngine.setFinishCallback(n,e),n},e.prototype.stop=function(t){cc.audioEngine.stopEffect(t)},e.prototype.stopAll=function(){cc.audioEngine.stopAllEffects()},e.prototype.pause=function(t){cc.audioEngine.pauseEffect(t)},e.prototype.pauseAll=function(){cc.audioEngine.pauseAllEffects()},e.prototype.resume=function(t){cc.audioEngine.resumeEffect(t)},e.prototype.resumeAll=function(){cc.audioEngine.resumeAllEffects()},e}(t("../utility/Singleton").Singleton);n.SfxAudio=i,cc._RF.pop()},{"../utility/Singleton":"Singleton"}],SimulateUtil:[function(t,e){"use strict";cc._RF.push(e,"391e0ERiRFNt79UHCnTNx+d","SimulateUtil"),cc._RF.pop()},{}],SingleLoader:[function(t,e,n){"use strict";cc._RF.push(e,"ebdd5LFQy9H74152x9+081q","SingleLoader");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SingleLoader=void 0;var i=t("../AssetLoader"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.execute=function(t,e){return new Promise(function(n,o){var r=i.AssetLoader.parseUrl(t),c=r.path,s=r.bundle,u=s?cc.assetManager.getBundle(s):cc.resources;u?u.load(c,e,function(t,e){return t?o(t):n(e)}):o()})},e}(i.AssetLoader);n.SingleLoader=c,cc._RF.pop()},{"../AssetLoader":"AssetLoader"}],Singleton:[function(t,e,n){"use strict";cc._RF.push(e,"9902fRuweVHho2Pkk0kanCV","Singleton"),Object.defineProperty(n,"__esModule",{value:!0}),n.Singleton=void 0;var o=function(){function t(){}return t.inst=function(){return null==this._inst&&(this._inst=new this),this._inst},t.destroy=function(){this._inst.onDestroy(),this._inst=null},t}();n.Singleton=o,cc._RF.pop()},{}],Spawn:[function(t,e,n){"use strict";cc._RF.push(e,"ea1991FTJJMaKY7sCkaK3kY","Spawn");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Spawn=void 0;var i=t("../../define/Board"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return i.ActType.Spawn},enumerable:!1,configurable:!0}),e}(t("../BoardCmd").ChessAct);n.Spawn=c,cc._RF.pop()},{"../../define/Board":"Board","../BoardCmd":"BoardCmd"}],SpineCmpt:[function(t,e,n){"use strict";cc._RF.push(e,"5e7b1Cf4AdFlYKG/hOPwLkE","SpineCmpt");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.SpineCmpt=void 0;var u=t("../event/EventBase"),a=cc._decorator,l=a.ccclass,p=(a.property,a.requireComponent),f=a.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._spine=null,e}var n;return r(e,t),n=e,e.prototype.onLoad=function(){this._spine=this.getComponent(sp.Skeleton)},e.prototype.setData=function(t){t!=this._spine.skeletonData&&(this._spine.skeletonData=t)},e.prototype.setScale=function(t){t!=this._spine.timeScale&&(this._spine.timeScale=t)},e.prototype.stop=function(){var t,e;null===(t=this._spine)||void 0===t||t.clearTrack(n.TRACK),null===(e=this._spine)||void 0===e||e.setToSetupPose()},e.prototype.pause=function(){this._spine&&(this._spine.paused=!0)},e.prototype.resume=function(){this._spine&&(this._spine.paused=!1)},e.prototype.playOnce=function(t,e){var o=this;void 0===t&&(t=this._spine.defaultAnimation),this.stop(),this.resume();var r=this._spine.setAnimation(n.TRACK,t,!1);return this.listen(r,e),new Promise(function(t){return c(o,void 0,void 0,function(){return s(this,function(){return[2,this._spine.scheduleOnce(t,r.animation.duration)]})})})},e.prototype.playLoop=function(t,e){var o;void 0===t&&(t=this._spine.defaultAnimation),this.stop(),this.resume();var r=null===(o=this._spine)||void 0===o?void 0:o.setAnimation(n.TRACK,t,!0);this.listen(r,e)},e.prototype.playSteps=function(t,e){var o=this;this.stop(),this.resume();var r=0;if(t.forEach(function(t){var i,c=null===(i=o._spine)||void 0===i?void 0:i.addAnimation(n.TRACK,t,!1);o.listen(c,e),r+=c.animation.duration},this),r>0)return new Promise(function(t){return c(o,void 0,void 0,function(){return s(this,function(){return[2,this._spine?this._spine.scheduleOnce(t,r):t()]})})})},e.prototype.listen=function(t,e){t&&e&&this._spine.setTrackEventListener(t,function(t,n){return e(n.data.name)})},e.prototype.bindBone=function(t,e){var n=this._spine.attachUtil.generateAttachedNodes(e);n&&n.length>0&&(t.parent=n[0])},e.TRACK=99,i([u.onTrigger("SCALE")],e.prototype,"setScale",null),n=i([l,p(sp.Skeleton),f("cmpt/spine"),u.enableEvent()],e)}(cc.Component);n.SpineCmpt=h,cc._RF.pop()},{"../event/EventBase":"EventBase"}],Spine:[function(t,e){"use strict";cc._RF.push(e,"4cc08o+cQ1IrKdO6L8wZwJp","Spine"),cc._RF.pop()},{}],StageCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"1191faArQBMALZpqAE/azjN","StageCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.StageCtrl=void 0;var u=t("./../common/event/EventBase"),a=t("./../common/utility/RandUtil"),l=t("./../common/utility/WaitUtil"),p=t("../board/BoardCtrl"),f=t("../define/Board"),h=t("../define/Event"),d=t("./StageModel"),y=t("./StageView"),_=cc._decorator,v=_.ccclass,b=_.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._model=new d.StageModel,e.view=null,e}var n;return r(e,t),n=e,e.inst=function(){return this._inst},e.prototype.onLoad=function(){n._inst=this,this.view.init(this._model)},e.prototype.onDestroy=function(){this._model=null},e.prototype.onEnable=function(){this._model.setLv(1),this.fight()},e.prototype.reset=function(){return c(this,void 0,Promise,function(){var t,e,n,o,r;return s(this,function(i){switch(i.label){case 0:for(this._model.reset(),this.view.reset(),t=3*(this._model.lv-1),e=1==this._model.lv?0:t+3,n=(n=a.RandUtil.randInt(e+1,t)).limit(0,35),o=[],r=0;r<n;r++)o.push({x:a.RandUtil.randInt(f.BOARD_COL),y:a.RandUtil.randInt(f.BOARD_ROW)});return[4,p.BoardCtrl.inst().reset(o)];case 1:return i.sent(),[2]}})})},e.prototype.fight=function(){return c(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.reset()];case 1:return t.sent(),[4,this.view.fight()];case 2:return t.sent(),p.BoardCtrl.inst().fight(),[2]}})})},e.prototype.crush=function(t){this._model.decRule(t)},e.prototype.finish=function(){return c(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return this.winner()?[2]:this._model.decLights()<=0?(this._model.downGas(),[4,l.WaitUtil.waitSec(.3)]):[3,2];case 1:t.sent(),0==this.loser()&&this._model.fullLights(),t.label=2;case 2:return[2]}})})},e.prototype.winner=function(){var t=this;return!!this._model.passed()&&(this.view.playWin().then(function(){t._model.incLv(),t.fight()}),!0)},e.prototype.loser=function(){return this._model.gas<=0&&(this.view.playLose(),!0)},e.prototype.debugClean=function(){this._model.cleanRules()},e.prototype.debugLight=function(){this.finish()},e._inst=null,i([b(y.StageView)],e.prototype,"view",void 0),i([u.onTrigger(h.EventType[h.EventType.BoardCrush])],e.prototype,"crush",null),i([u.onTrigger(h.EventType[h.EventType.DebugClean])],e.prototype,"debugClean",null),i([u.onTrigger(h.EventType[h.EventType.DebugLight])],e.prototype,"debugLight",null),n=i([v,u.enableEvent()],e)}(cc.Component);n.StageCtrl=g,cc._RF.pop()},{"../board/BoardCtrl":"BoardCtrl","../define/Board":"Board","../define/Event":"Event","./../common/event/EventBase":"EventBase","./../common/utility/RandUtil":"RandUtil","./../common/utility/WaitUtil":"WaitUtil","./StageModel":"StageModel","./StageView":"StageView"}],StageModel:[function(t,e,n){"use strict";cc._RF.push(e,"93b58fHKXNOZIjXbW+CqdTq","StageModel"),Object.defineProperty(n,"__esModule",{value:!0}),n.StageModel=void 0;var o=t("./../common/utility/DataDriven"),r=t("../define/Board"),i=t("../define/Stage"),c=function(){function t(){this.rules=new Map,this.lv=1,this.lights=6,this.gas=r.BOARD_ROW,this.notice=o.DataDriven.generate({main:"",sub:""})}return t.prototype.cleanRules=function(){this.rules.forEach(function(t){return t.count=0}),this.notice.set({main:"rules",sub:"dec"})},t.prototype.decRule=function(t,e){void 0===e&&(e=1),this.rules.has(t)&&(this.rules.get(t).count-=e,this.notice.set({main:"rules",sub:"dec"}))},t.prototype.setRules=function(){var t=this;this.rules.clear(),i.STAGE_RULES[this.lv].forEach(function(e){var n=e.type;t.rules.has(n)?t.rules.get(n).count+=e.count:e.type!=r.ChessType.None&&e.count>0&&t.rules.set(n,Object.assign({},e))},this),this.notice.set({main:"rules",sub:"set"})},t.prototype.incLv=function(t){return void 0===t&&(t=1),this.setLv(this.lv+t)},t.prototype.setLv=function(t){return this.lv=t.limit(1,i.MAX_LV),this.notice.set({main:"lv",sub:"set"}),this.setRules(),this.lv},t.prototype.incLights=function(t){return void 0===t&&(t=1),this.lights=(this.lights+1).limit(0,i.MAX_LIGHTS),this.notice.set({main:"lights",sub:"inc"}),this.lights},t.prototype.decLights=function(){return this.lights=(this.lights-1).limit(0,i.MAX_LIGHTS),this.notice.set({main:"lights",sub:"dec"}),this.lights},t.prototype.fullLights=function(){return this.lights=i.MAX_LIGHTS,this.notice.set({main:"lights",sub:"set"}),this.lights},t.prototype.downGas=function(){return this.gas=(this.gas-1).limit(0,r.BOARD_ROW),this.notice.set({main:"gas",sub:"down"}),this.gas},t.prototype.upGas=function(){return this.gas=(this.gas+1).limit(0,r.BOARD_ROW),this.notice.set({main:"gas",sub:"up"}),this.gas},t.prototype.reset=function(){this.fullLights(),this.gas=r.BOARD_ROW},t.prototype.passed=function(){for(var t=Array.from(this.rules.values()),e=t.length,n=0;n<e;n++)if(t[n].count>0)return!1;return!0},t}();n.StageModel=c,cc._RF.pop()},{"../define/Board":"Board","../define/Stage":"Stage","./../common/utility/DataDriven":"DataDriven"}],StageView:[function(t,e,n){"use strict";cc._RF.push(e,"18519CKLGdCNoTPAYzupXUw","StageView");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.StageView=void 0;var u=t("./sub/BlocksView"),a=t("./sub/GasView"),l=t("./sub/LightsView"),p=t("./sub/LoseView"),f=t("./sub/RuleView"),h=t("./sub/WinView"),d=cc._decorator,y=d.ccclass,_=d.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._model=null,e.blocks=null,e.rules=null,e._rules=[],e.lv=null,e.lights=null,e.gas=null,e.win=null,e.lose=null,e}return r(e,t),e.prototype.onLoad=function(){this._rules=this.rules.getComponentsInChildren(f.RuleView)},e.prototype.onDisable=function(){this._model.notice.clear()},e.prototype.init=function(t){var e=this;this._model=t,t.notice.listen(function(t){switch(t.main){case"rules":e.setRules(t.sub);break;case"lv":e.setLv(t.sub);break;case"lights":e.setLights(t.sub);break;case"gas":e.setGas(t.sub)}})},e.prototype.reset=function(){this._rules.forEach(function(t){return t.reset()}),this.blocks.reset(),this.lights.reset(),this.gas.reset()},e.prototype.fight=function(){return c(this,void 0,Promise,function(){var t;return s(this,function(e){switch(e.label){case 0:return(t=[]).push(this.blocks.fight()),t.push(this.lights.fight()),t.push(this.gas.fight()),[4,Promise.all(t)];case 1:return e.sent(),[2]}})})},e.prototype.setRules=function(t){var e=this,n=0;switch(t){case"dec":this._model.rules.forEach(function(t){return e._rules[n++].setCount(t.count)});break;case"set":this._model.rules.forEach(function(t){return e._rules[n++].fight(t)},this)}},e.prototype.setLv=function(){this.lv.string=this._model.lv.toString()},e.prototype.setLights=function(t){switch(t){case"inc":this.lights.inc();break;case"dec":this.lights.dec();break;case"set":this.lights.full()}},e.prototype.setGas=function(t){switch(t){case"down":this.gas.down();break;case"up":this.gas.up()}},e.prototype.playWin=function(){return c(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.win.play()];case 1:return t.sent(),[2]}})})},e.prototype.playLose=function(){return c(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.lose.play()];case 1:return t.sent(),[2]}})})},i([_(u.BlocksView)],e.prototype,"blocks",void 0),i([_({type:cc.Node,tooltip:"\u6240\u6709RuleView\u7684\u7236\u7269\u4ef6"})],e.prototype,"rules",void 0),i([_(cc.Label)],e.prototype,"lv",void 0),i([_(l.LightsView)],e.prototype,"lights",void 0),i([_(a.GasView)],e.prototype,"gas",void 0),i([_(h.WinView)],e.prototype,"win",void 0),i([_(p.LoseView)],e.prototype,"lose",void 0),i([y],e)}(cc.Component);n.StageView=v,cc._RF.pop()},{"./sub/BlocksView":"BlocksView","./sub/GasView":"GasView","./sub/LightsView":"LightsView","./sub/LoseView":"LoseView","./sub/RuleView":"RuleView","./sub/WinView":"WinView"}],Stage:[function(t,e,n){"use strict";cc._RF.push(e,"d32d78YIp9Pioo1o7/dp1Fo","Stage"),Object.defineProperty(n,"__esModule",{value:!0}),n.STAGE_RULES=n.MAX_LIGHTS=n.MAX_LV=n.MAX_RULES=void 0;var o=t("./Board");n.MAX_RULES=4,n.MAX_LV=12,n.MAX_LIGHTS=6,n.STAGE_RULES={0:[{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0}],1:[{type:o.ChessType.Blue,count:10},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0}],2:[{type:o.ChessType.Green,count:15},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0}],3:[{type:o.ChessType.Yellow,count:10},{type:o.ChessType.Green,count:10},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0}],4:[{type:o.ChessType.BoomH,count:1},{type:o.ChessType.BoomV,count:1},{type:o.ChessType.BoomO,count:1},{type:o.ChessType.None,count:0}],5:[{type:o.ChessType.Blue,count:5},{type:o.ChessType.Green,count:5},{type:o.ChessType.Red,count:5},{type:o.ChessType.Yellow,count:5}],6:[{type:o.ChessType.Blue,count:10},{type:o.ChessType.Green,count:10},{type:o.ChessType.Red,count:5},{type:o.ChessType.Yellow,count:5}],7:[{type:o.ChessType.Blue,count:5},{type:o.ChessType.Green,count:5},{type:o.ChessType.Red,count:10},{type:o.ChessType.Yellow,count:10}],8:[{type:o.ChessType.Blue,count:20},{type:o.ChessType.Green,count:20},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0}],9:[{type:o.ChessType.Red,count:25},{type:o.ChessType.Yellow,count:25},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0}],10:[{type:o.ChessType.Blue,count:30},{type:o.ChessType.Yellow,count:30},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0}],11:[{type:o.ChessType.Red,count:40},{type:o.ChessType.Blue,count:40},{type:o.ChessType.None,count:0},{type:o.ChessType.None,count:0}],12:[{type:o.ChessType.Blue,count:30},{type:o.ChessType.Green,count:30},{type:o.ChessType.Red,count:30},{type:o.ChessType.Yellow,count:30}]},cc._RF.pop()},{"./Board":"Board"}],StrExtend:[function(t,e){"use strict";cc._RF.push(e,"e05eaNRbl9EXJEHrRWKX7eV","StrExtend"),String.prototype.format=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.replace(/\{(\d+)\}/g,function(e,n){return t[n]})},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"gm"),e)},cc._RF.pop()},{}],Stuff:[function(t,e,n){"use strict";cc._RF.push(e,"5d6f9Oh2NZE66w/+TXXzmRa","Stuff");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Stuff=void 0;var i=t("../../../define/Board"),c=t("../../BoardModel"),s=t("../../ChessModel"),u=t("../../action/Move"),a=t("../../action/Spawn"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.business=function(t){var e=this;c.BoardModel.loopX(function(n){var o=0;c.BoardModel.loopY(function(r){var c={x:n,y:r};if(!e._model.getChess(c)){var l=new s.ChessModel;l.type=e._model.getRandType(),e._model.setChess(c,l),l.dropPos={x:n,y:i.BOARD_ROW+ ++o},e._cmd.add(l,new u.Move(l.dropPos,!0)),e._cmd.add(l,new a.Spawn),e._cmd.add(l,new u.Move(c)),t.area.push(c)}})})},e}(t("../SelectChain").SelectChain);n.Stuff=l,cc._RF.pop()},{"../../../define/Board":"Board","../../BoardModel":"BoardModel","../../ChessModel":"ChessModel","../../action/Move":"Move","../../action/Spawn":"Spawn","../SelectChain":"SelectChain"}],Texture:[function(t,e,n){"use strict";cc._RF.push(e,"abdc5IGd69CQZ8cEUp4jC4W","Texture"),Object.defineProperty(n,"__esModule",{value:!0}),n.TextureSrc=void 0,function(t){t.Blue="texture/chess/blue",t.BoomH="texture/chess/boom-h",t.BoomO="texture/chess/boom-o",t.BoomV="texture/chess/boom-v",t.Brown="texture/chess/brown",t.Green="texture/chess/green",t.Knight="texture/chess/knight",t.Purple="texture/chess/purple",t.Red="texture/chess/red",t.Stone="texture/chess/stone",t.Yellow="texture/chess/yellow"}(n.TextureSrc||(n.TextureSrc={})),cc._RF.pop()},{}],WaitUtil:[function(t,e,n){"use strict";cc._RF.push(e,"3fa49y+b3ZLmIY3zp2zJsYZ","WaitUtil");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.WaitUtil=void 0;var i=function(){function t(){}return t.waitMS=function(t){return o(this,void 0,Promise,function(){return r(this,function(){return[2,new Promise(function(e){return window.setTimeout(e,t)})]})})},t.waitSec=function(t){return o(this,void 0,Promise,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.waitMS(1e3*t)];case 1:return[2,e.sent()]}})})},t.waitCmptMS=function(t,e){return o(this,void 0,Promise,function(){return r(this,function(n){switch(n.label){case 0:return[4,this.waitCmptSec(t,e/1e3)];case 1:return[2,n.sent()]}})})},t.waitCmptSec=function(t,e){return o(this,void 0,Promise,function(){return r(this,function(){return[2,new Promise(function(n){return t.scheduleOnce(n,e)})]})})},t}();n.WaitUtil=i,cc._RF.pop()},{}],WallpaperAdapt:[function(t,e,n){"use strict";cc._RF.push(e,"e45c4YDadRLzrMR5UqeyCOx","WallpaperAdapt");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.WallpaperAdapt=void 0;var c=t("../../event/EventBase"),s=cc._decorator,u=s.ccclass,a=(s.property,s.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.adjust()},e.prototype.adjust=function(){var t=cc.view.getCanvasSize(),e=Math.min(t.width/this.node.width,t.height/this.node.height),n=this.node.width*e,o=this.node.height*e;this.node.scale=Math.max(t.width/n,t.height/o)},i([c.onTrigger("RESIZE")],e.prototype,"adjust",null),i([u,a("adapt/wallpaper"),c.enableEvent()],e)}(cc.Component);n.WallpaperAdapt=l,cc._RF.pop()},{"../../event/EventBase":"EventBase"}],WidgetAdapt:[function(t,e,n){"use strict";cc._RF.push(e,"6ad9esNoflCrr0wUUb0IB2b","WidgetAdapt");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.WidgetAdapt=void 0;var c=t("../../event/EventBase"),s=cc._decorator,u=s.ccclass,a=(s.property,s.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.adjust()},e.prototype.adjust=function(){this.node.setContentSize(cc.Canvas.instance.designResolution);var t=cc.view.getCanvasSize(),e=Math.min(t.width/this.node.width,t.height/this.node.height),n=this.node.width*e,o=this.node.height*e;this.node.width*=t.width/n,this.node.height*=t.height/o},i([c.onTrigger("RESIZE")],e.prototype,"adjust",null),i([u,a("adapt/widget"),c.enableEvent()],e)}(cc.Component);n.WidgetAdapt=l,cc._RF.pop()},{"../../event/EventBase":"EventBase"}],WinView:[function(t,e,n){"use strict";cc._RF.push(e,"c25e54UkDFBXrhnTI5mFHXb","WinView");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return u([t,e])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.WinView=void 0;var u=t("./../../common/component/SpineCmpt"),a=t("./../../common/utility/WaitUtil"),l=cc._decorator,p=l.ccclass,f=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.win=null,e}return r(e,t),e.prototype.onLoad=function(){this.node.active=!1,this.node.x=0},e.prototype.play=function(){return c(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return this.node.active=!0,[4,this.win.playOnce("LegendWin")];case 1:return t.sent(),this.win.playLoop("LegendWinLoop"),[4,a.WaitUtil.waitSec(2.5)];case 2:return t.sent(),this.node.active=!1,[2]}})})},i([f(u.SpineCmpt)],e.prototype,"win",void 0),i([p],e)}(cc.Component);n.WinView=h,cc._RF.pop()},{"./../../common/component/SpineCmpt":"SpineCmpt","./../../common/utility/WaitUtil":"WaitUtil"}]},{},["AssetBridge","GameMgr","BoardCmd","BoardCtrl","BoardModel","BoardView","ChessModel","ChessView","Crush","Merge","Move","Select","Spawn","BuffSelect","CtrlSelect","NormSelect","SelectChain","SelectHandler","BoomH","BoomO","BoomV","Clean","CrushH","CrushV","Drop","Reset","Stuff","AssetLoader","AssetMgr","BundleLoader","FolderLoader","SingleLoader","BgmAudio","SfxAudio","SpineCmpt","CanvasAdapt","WallpaperAdapt","WidgetAdapt","BasePnl","EventBase","EventMgr","NumExtend","StrExtend","CmptPool","ObjPool","DataDriven","RandUtil","SimulateUtil","Singleton","WaitUtil","DebugPnl","DebugTool","Audio","Board","Event","Prefab","Spine","Stage","Texture","StageCtrl","StageModel","StageView","BlocksView","GasView","LightsView","LoseView","RuleView","WinView"]);